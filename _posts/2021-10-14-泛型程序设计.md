---
layout: post
title: 泛型程序设计
date: 2021-10-14
tags: JavaSE基础
---
## 1. 基本概念
泛型程序设计意味着编写的代码可以被很多不同类型的对象所重用，例如，一个ArrayList类可以聚集任何类型的对象。  
在Java增加泛型类之前，泛型程序设计使用继承实现的。ArrayList类维护一个Object引用的数组。这种方法有两个问题：
1. 当获取一个值时必须进行强制类型转换。
2. 可以向数组列表添加任何类对象，没有错误检查。

泛型提供了类型参数：

```java
ArrayList<String> file=new ArrayList<>();
```

这样编译器就可以利用这个信息，从而解决了上述两个问题。  
类型参数可以使得程序具有更好的可读性和安全性。  

## 2. 定义简单泛型类
一个泛型类就是具有一个或多个类型变量的类。例：

```java
public class PairTest {
    public static void main(String[] args) {
        String a = "zy";
        String b = "a";
        Pair<String> mm = new Pair<>(a, b); //用具体的类型替换类型变量就可以实例化泛型类型
        System.out.println(mm.getFirst());
        System.out.println(mm.getSecond());
    }

}

class Pair<T> { //还可以有多个类型变量，如<T,U>
    private T first;
    private T second;

    public Pair(T first, T second) {
        this.first = first;
        this.second = second;
    }

    public T getFirst() {
        return first;
    }

    public T getSecond() {
        return second;
    }
}
```

Java泛型类与c++模版类的机制有本质的区别。
## 3. 泛型方法
还可以定义一个带有类型参数的简单方法。类型变量放在修饰符后面，返回类型前面。

```java
public static <U> String Test(U u) {
        String a = u.toString();
        return a;
    }
```

调用泛型方法：

```java
String s=Pair.<Integer>Test(5);
s=Pair.Test(5); //大多数情况下可以推断出类型即可省略
System.out.println(s);
```

## 4. 类型变量的限定
有时类或方法需要对类型变量加以约束，例：

```java
public static <T extends Comparable> T min(T[] a)... 
```

上述代码将T限制为实现了Comparable接口的类。min方法只能被实现了Comparable接口的类调用。  
为什么使用extends：<T extends BoundType>表示T应该是绑定类型的子类型，T和绑定类型可以是类也可以是接口。  
一个类型变量可以有多个限定：

```java
T extends Comparable & Serializable
```

由于单继承原因，限定中至多有一个类，如果用一个类作为限定，它必须是限定列表中的第一个。但可以有多个限定接口。

